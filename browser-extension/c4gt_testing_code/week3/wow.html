<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Switch Example</title>
    <style>
        .form-check-label {
            visibility: visible;
        }

        .hidden {
            visibility: hidden;
        }
    </style>
</head>
<body>
    
    <div>
        <label for="toggleCrazy">Toggle Crazy</label>
        <input type="checkbox" id="toggleCrazy">
    </div>
    <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" role="switch" id="flexCheckDefault">
        <label class="form-check-label" for="flexCheckDefault">Toggle Slurs</label>
    </div>

    <div>
        <p>
            Lorem ipsum dolor sit amet consectetur crazy adipisicing elit. Quaerat alias iste quo exercitationem stupid
            nesciunt ea?
        </p>

        <p>
            Lorem ipsum, dolor sit amet stupid mad adipisicing elit. Magni minima adipisci architecto.
        </p>
    </div>

    <div class="class">
        <img src="" alt="">
        <div>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ipsa possimus quisquam temporibus
                reprehenderit nesciunt dignissimos sunt ipsum, nostrum modi? Iusto libero sed alias!
            </p>
            <span>crazy</span>
        </div>
    </div>
    <h3>
        crazy
    </h3>
    <p>
        Lorem ipsum dolor crazy stupid sit stupid amet consectetur adipisicing elit. Aut architecto illum dolorum
        mad.
    </p>

    <button>
        crazy
    </button>
    <script>
        const iconSrc = './info.svg';
        const iconAlt = 'Icon description';
        const targetWords = ['crazy', 'stupid', 'mad'];
        let excludeCrazy = false;

        // Toggle button for "crazy"
        const toggleCrazyInput = document.getElementById('toggleCrazy');
        toggleCrazyInput.addEventListener('change', (event) => {
            excludeCrazy = event.target.checked;
            updateIcons();
        });

        // Checkbox for toggling icons
        const switchInput = document.getElementById('flexCheckDefault');
        switchInput.addEventListener('change', (event) => {
            if (event.target.checked) {
                updateIcons();
            } else {
                removeIcons();
            }
        });

        function updateIcons() {
            const currentTargetWords = excludeCrazy ? targetWords.filter(word => word !== 'crazy') : targetWords;

            document.querySelectorAll('*').forEach(element => {
                currentTargetWords.forEach(targetWord => {
                    if (element.innerHTML.includes(targetWord)) {
                        const className = `icon-container-${targetWord}`;
                        // Remove existing icons
                        removeExistingIcons(element, className);
                        // Split the innerHTML into parts to handle replacements
                        const parts = element.innerHTML.split(targetWord);
                        const replacedHTML = parts.join(`${targetWord}<span class="${className}"></span>`);
                        // Update the element with the replaced content
                        element.innerHTML = replacedHTML;
                        // Add icon after each occurrence of the target word
                        const iconContainers = element.querySelectorAll(`.${className}`);
                        iconContainers.forEach(container => {
                            const icon = document.createElement('img');
                            icon.src = iconSrc;
                            icon.alt = iconAlt;
                            container.appendChild(icon);
                        });
                    }
                });
            });
        }

        function removeIcons() {
            targetWords.forEach(targetWord => {
                document.querySelectorAll(`.icon-container-${targetWord}`).forEach(container => {
                    container.remove();
                });
            });
        }

        function removeExistingIcons(element, className) {
            element.querySelectorAll(`.${className}`).forEach(container => {
                container.remove();
            });
        }
    </script>
</body>
</html>
