let slurList =
    '‡§ú‡§ø‡§π‡§æ‡§¶‡•Ä|‡§õ‡§ï‡•ç‡§ï‡§æ|‡§õ‡§ø‡§®‡§æ‡§≤|‡§∞‡§Ç‡§°‡•Ä|‡§∞‡§£‡•ç‡§°‡•Ä|‡§∞‡§æ‡§Ç‡§°|‡§∞‡§Ç‡§°‡•Ä‡§ñ‡§æ‡§®‡§æ|‡§∞‡§£‡•ç‡§°‡•Ä ‡§∞‡•ã‡§®‡§æ|‡§≤‡•Å‡§≤‡•ç‡§≤‡•Ä|‡§ó‡§æ‡§Ç‡§°|‡§ï‡•Å‡§§‡§ø‡§Ø‡§æ|‡§ï‡•Å‡§§‡•ç‡§§‡•Ä|‡§¨‡§§‡•ç‡§§‡§Æ‡•Ä‡•õ|‡§ï‡•Å‡§≤‡•ç‡§ü‡§æ|‡§π‡§∞‡§æ‡§Æ‡§ú‡§æ‡§¶‡•Ä|‡§∏‡§æ‡§≤‡•Ä|‡§ö‡•Å‡§¶‡§æ‡§à|ma ki chui|‡§Æ‡§æ ‡§ï‡•á ‡§≠‡•ã‡§∏‡§°‡§º‡•á|‡§≠‡•ã‡§∏‡•ç‡§°‡•Ä‡§ï‡•á|‡§≠‡•ã‡§õ‡§°‡•Ä ‡§µ‡§æ‡§≤‡§æ |‡§≤‡•ã‡•ú‡•Ç|‡§¨‡§π‡§® ‡§ö‡•ã‡§¶|‡§Æ‡§æ‡§¶‡§∞‡§ö‡•ã‡§¶|‡§≤‡§æ‡§®‡§§‡•Ä|‡§õ‡•Å‡§§‡•Ä‡§Ø‡•á|‡§ö‡•Ç‡§§‡§ø‡§Ø‡•á |‡§ö‡•Ç‡§§|‡§≤‡•å‡•ú‡§æ|‡§≤‡•å‡•ú‡•á|‡§ö‡§∞‡§ø‡§§‡•ç‡§∞‡§π‡•Ä‡§® |‡§≤‡§ø‡§¨‡•ç‡§∞‡§æ‡§£‡•ç‡§°‡•Ç|‡§®‡§Ç‡§ó‡•Ä ‡§™‡•Å‡§Ç‡§ó‡•Ä|‡§™‡§æ‡§ó‡§≤ ‡§î‡§∞‡§§ |‡§¨‡§æ‡•õ‡§æ‡§∞‡•Ç ‡§î‡§∞‡§§|‡§¨‡§≤‡§æ‡§§‡•ç‡§ï‡§æ‡§∞|‡§¨‡§¶‡§∏‡•Ç‡§∞‡§§|‡§Æ‡•Å‡§ú‡§∞‡§æ|‡§ú‡§æ‡§π‡§ø‡§≤ ‡§î‡§∞‡§§|‡§î‡§∞‡§§-‡§è-‡§ú‡§æ‡§π‡§ø‡§≤|‡§≠‡•ã‡§∏‡§°‡§º‡•Äwala|‡§ö‡§Ç‡§°‡§æ‡§≤ ‡§ö‡•å‡§ï‡§°‡§º‡•Ä|‡§Æ‡•ç‡§≤‡•á‡§ö‡•ç‡§õ‡§æ|‡§∏‡•Ç‡§Ö‡§∞|‡§∏‡•Ç‡§Ö‡§∞ ‡§ï‡•Ä ‡§î‡§≤‡§æ‡§¶|‡§¶‡•ã‡§ó‡§≤‡•Ä|üèπüèπ|‡§™‡§®‡•å‡§§‡•Ä|‡§π‡§∞‡§æ‡§Æ‡•Ä|‡§ó‡§ß‡•Ä|‡§¨‡•Å‡§∞‡§ñ‡§æ ‡§ß‡§§‡•ç‡§§|‡§¨‡•Å‡§≤‡•ç‡§≤‡•Ä |‡§ï‡§≤‡§Æ‡•Å‡§Ç‡§π‡•Ä |‡§™‡§ø‡§õ‡§µ‡§æ‡•ú‡§æ|‡§ï‡§æ‡§Æ ‡§µ‡§æ‡§≤‡•Ä ‡§¨‡§æ‡§à|‡§™‡•à‡§∞ ‡§ï‡•Ä ‡§ú‡•Ç‡§§‡•Ä|‡§ó‡§Ç‡§¶‡•Ä ‡§®‡§æ‡§≤‡•Ä|‡§π‡§ó‡§®‡§æ|‡§∏‡•Å‡§≤‡•ç‡§≤‡•Ä|‡§π‡§ø‡§ú‡§º‡§∞‡§æ‡§™‡§Ç‡§§‡•Ä|naachne waali|‡§§‡§µ‡§æ‡§á‡•û|‡§∏‡•å ‡§ü‡§ï‡§æ ‡§ü‡§Ç‡§ö ‡§Æ‡§æ‡§≤|‡§ï‡§ø‡§®‡•ç‡§®‡§∞|‡§ó‡§¶‡•ç‡§¶‡§æ‡§∞|‡§ö‡§Æ‡§ö‡§æ|‡§ö‡§Æ‡§ö‡•Ä|‡§Ü‡§§‡§Ç‡§ï‡§µ‡§æ‡§¶‡•Ä|‡§Æ‡•Å‡§≤‡§ø‡§Ø‡§æ|Katwa|‡§ö‡§æ‡§ü‡•Å‡§ï‡§æ‡§∞|‡§¨‡§π‡§® ‡§ï‡•Ä ‡§≤‡•ã‡•ú‡•Ä|‡§ö‡•Å‡§∏‡•ç‡§≤‡§ø‡§Æ|‡§ö‡•Å‡§∏‡•ç‡§≤‡§æ‡§Æ‡§ø|‡§ö‡•Å‡§∏‡§≤‡•ç‡§Æ‡§æ‡§®|‡§ö‡•Ç‡§∏|‡§≠‡•Ä‡§Æ‡§ü‡§æ|‡§≠‡•Ä‡§Æ‡§ü‡•Ä|‡§¨‡•à‡§≤ ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø|‡§π‡§≤‡§æ‡§≤‡§æ|‡§≠‡§¶‡•ç‡§¶‡•Ä ‡§î‡§∞‡§§|‡§≠‡§æ‡§Ç‡§° ‡§î‡§∞‡§§|‡§≠‡§æ‡•ú‡•á ‡§ï‡§æ ‡§ü‡§ü‡•ç‡§ü‡•Ç|‡§¶‡•ã ‡§ï‡•å‡•ú‡•Ä ‡§ï‡•Ä ‡§î‡§∞‡§§|‡§ò‡§ü‡§ø‡§Ø‡§æ ‡§î‡§∞‡§§|‡§¨‡•á‡§π‡•Ç‡§¶‡§æ ‡§î‡§∞‡§§|‡§ö‡§æ‡§≤‡•Ç ‡§î‡§∞‡§§|‡§ù‡•Ç‡§†‡•Ä ‡§î‡§∞‡§§|‡§Æ‡§∞ ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§ú‡§æ‡§§‡•Ä|‡§®‡§≤‡•ç‡§≤‡•Ä|‡§≠‡•Ç‡§§‡§®‡•Ä ‡§ï‡•á|‡§ö‡•Ç‡§§ ‡§ï‡•á ‡§¨‡§æ‡§≤|‡§Æ‡§æ‡§¶‡§∞‡§ú‡§æ‡§§|‡§≠‡•ú‡§µ‡§æ|‡§ö‡•Ç‡§ö‡•Ä|‡§ü‡§ü‡•ç‡§ü‡•Ä|‡§ó‡§ü‡§∞ ‡§™‡•à‡§¶‡§æ‡§á‡§∂|‡§Æ‡•Å‡§Å‡§π ‡§Æ‡•à‡§Ç ‡§≤‡•á|‡§Æ‡•Ç‡§§|‡§®‡§æ‡§ú‡§æ‡§Ø‡•õ|‡§ï‡§ü‡§æ ‡§≤‡•Å‡§Ç‡§°|‡§ï‡§æ‡§≤‡§æ ‡§ü‡•á‡§Ç‡§ü|‡§ú‡•Ç‡§§‡§æ ‡§ñ‡§æ‡§Ø‡•á‡§ó‡•Ä|‡§¨‡•Å‡§∞‡§ñ‡•á ‡§µ‡§æ‡§≤‡•Ä|‡§ï‡§æ‡§≤‡•Ä ‡§ï‡§≤‡•Ç‡§ü‡•Ä|‡§ï‡§æ‡§≤‡•á ‡§§‡§µ‡•á|‡§Æ‡•ã‡§ü‡•Ä ‡§≠‡•à‡§Ç‡§∏|‡§¶‡•á‡§π‡§æ‡§§‡§®|‡§¶‡•á‡§π‡§æ‡§§‡•Ä ‡§î‡§∞‡§§|‡§ó‡§£‡§ø‡§ï‡§æ|‡§π‡§¨‡§∂‡•Ä|‡§ì‡§≤‡§æ ‡§π‡•Å ‡§â‡§¨‡§∞|ABLANARI|AblaNari|ablanari|chakka|jihidis|jihadi|Jihidi|zehadi|jehadan|jihadinon|Chakko|chakki|chaka|Chinal|Randi|ramdi|Randie|randya|randikhana|randi ke beej|Lulli|Gasti|Meetha|Halwa|Gud|Gaandu|Gaand|Gandiaal|lodu|kutiya|kutti|Chudail|Badchalan|Battameez|kulta|haramjadi|dyan|saali|sali|chod|chodu bhagat|chudai|chooda|chuda|Bhdsk|2BHK|Bhosi ke|bsdk|bhonsdi ke|bhosad|bhosdiwale|maa ka bhosra|Lodu|bhenchod|Madarchod|Maderchod|mcp|mc|Lanti|chutiye|chutiya|Chut|hutiye|chutie|chutia|chut ke dhakkan|chut marli|chutan|Lavde|Gandu|Rakhail|librandu|chal phut|nangi poongi|pagal aurat|bazaru|bazari aurat|ola hi uber hai|balatkar|Ugly|Mujra|mujra|jaahil aurat|Mulli|hilana|hilaogi|Mlechcha|Suar|suar ki aulad|doghli|Panauti|panooti|harami|gadhi|‡§∞‡§®‡§°wa|üÖ±Ô∏èulli|kalmuhi|pichwada|jhadu|bai|kaam wali bai|pair ki jutti|naali|hagna|tukde tukde gang|Sulli|‡§®‡§æ‡§ö‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä|Tawaif|sau taka tunch maal|Skirt waali bai|Dhimmi hood|Dhimmihood|izzlam|gaddar|chamcha|chamchi|aatankwadi|Mulliya|Uncut|chatukar|Bahan Ke loudi|Kachra|Chuslim|chuslami|Chusalmans|chus|Bhimta|bheem-meem walas|bail budhi|Budhdhi|‡§π‡§≤‡§æ‡§≤‡§æ|bhadi aurat|bhanndh aurat|bhadi ka tattu|2 Kaudi ki aurat|Gatiya|Ghatiya aurat|behuda aurat|chalu aurat|jhuti aurat|Kaali aurat|Kaali bhaand|marr kyun nahi jaati|nalli|dimaag se paidal|bhootni|bhootni ke|choot ke baal|madarjaat|bhadva|bhadvi|bhandve|chuchi|tatti|maa ka boba chusu|mooh|munh mein le|mutth|najayaz paidaish|najayaz aulaad|Gutter ki paidaish|kata Lund|kala tent|joota khayegi|burkhe waali|ladki kahin ka|victim card|Aurat card|kali kalutti|Kale tawe|naali saaf kar|moti bhains|sukkhi haddi|Pataka|choodiyan pehen lo|abba ka naam|Ganika|gaand phadna|chewtypa|atrocuty_act|RandiKutiya|sulli|Rice bags|ola u uber|lovejihad|dull-it|toxic aunty|Presstitutes|libtard|bimbo|slims|Black Pepper|faggot|Sissy|whore|chrislamocommies|piddilover|Dynast Sycophants|Deshdrohi Chinese|Pak agents|Chinese Corona|Chinks|chinky|Feminazi|Mulli|halala|Half M|Scumreds|scumbags|burnol|anti national tukde|pheminist|dented-painted|Muzlim|Buzlim|Izzlam|pissfull|Simp|Bitch| Ms |sekoolar|sickular|sc0undrel|Characterless woman|Drama Queen|Ferrorists|Cunt|Slut|pussy|ugly|stupid|promiscuous|crazy|fat|fag|homo|hoe|motherfucker|sisterfucker|bastard|bint|dyke|gash|muslimette|muttah|scag|gender nigger|assfucker|boobs|boobies|Melons|lesbain|moslem|nasty|redlight|nymph|piss|pimp|poop|pube|puke|retarded|slave|sissy|ola uh uber|pu55i|pu55y|mothafuck|mothafucka|mothafuckaz|mothafucked|mothafucker|mothafuckin|mothafucking |mothafuckings|motherfuck|motherfucked|motherfucker|motherfuckin|motherfucking|motherfuckings|lesbain|lesbayn|lesbian|lesbin|lesbo|nastyslut|nastywhore|nastybitch|nastyho|Koodhi|pottai|Potta Alith|Aththai|athai|loosu|fuck|cunt';





function checkFalseTextNode(text, actualLengthOfText) {
    let totalNewlineAndWhitespaces = 0;
    for (let i = 0; i < text.length; i++) {
        if (text[i] === "\n" || text[i] === " " || text[i] === "\t") {
            // I think not only \n and " " , if a textNode is comprised of any escape characters and whitespace, it should be a false textNode
            totalNewlineAndWhitespaces++;
        }
    }
    return totalNewlineAndWhitespaces === actualLengthOfText;
}


// Function to recursively get all text nodes under a given node
function getAllTextNodes(node, uliStore) {
    if (node.nodeType === 3) { // Text node
        if (!checkFalseTextNode(node.data, node.length)) {
            uliStore.push({ node: node, parent: node.parentNode });
        }
    } else {
        let children = Array.from(node.childNodes);
        children.forEach(child => getAllTextNodes(child, uliStore));
    }
}



/*                getAllTextNodes()  ENDS HERE                */


/*                 locateSlur()  STARTS HERE                  */

function findPositions(word, text) {
    let positions = {};

    let len = word.length
    let loc = []
    let index = text.toString().indexOf(word);
    while (index !== -1) {
        let obj = {};
        loc.push([index, index + len]);
        index = text.toString().indexOf(word, index + 1);
    }


    if (loc.length !== 0) {
        positions.slurText = word
        positions.slurLocation = loc;
    }
    return positions;
}



function locateSlur(uliStore, targetWords) {
    let n = uliStore.length;

    for (let i = 0; i < n; i++) {
        let store = uliStore[i];  //This will contain the textNode 
        let parentNode = store.parent
        let textnode = store.node
        let text = store.node.textContent
        let tempParent = document.createElement("span");  //I chose span over p because span is an inline element and p is a block element, injecting block
        //element would cause a lot of change in the stylings and can damage the overall webpage to a greater extent
        tempParent.textContent = text;

        let slurs = [];
        let slurPresentInTempParent = false;
        targetWords.forEach(targetWord => {
            let slurWord = targetWord;
            let pos = findPositions(slurWord, text);
            if (Object.keys(pos).length !== 0) {
                slurs.push(pos)
            }

            if (tempParent.innerHTML.includes(targetWord)) {
                const className = `icon-container-${targetWord}`;
                const parts = tempParent.innerHTML.split(targetWord);
                const replacedHTML = parts.join(`${targetWord}<span class="${className}"></span>`);
                tempParent.innerHTML = replacedHTML
                slurPresentInTempParent = true;
            }
        })
        // for(let i = 0 ; i < )
        // console.log("tempParent " , tempParent)
        uliStore[i].nodeToParent = tempParent
        uliStore[i].slurs = slurs;

        //O(1) complexity
        if (slurPresentInTempParent) {
            // parentNode.replaceChild(tempParent, textnode)
            textnode.replaceWith(tempParent)
            // textnode.replaceWith(createTextNode(tempParent.innerHTML))

        }

    }
    return uliStore;
}


/*                    locateSlur()  ENDS HERE               */




/*                        addMetaData()  STARTS HERE           */

function addMetaData(targetWords) {
    targetWords.forEach(targetWord => {
        const className = `icon-container-${targetWord}`
        console.log("className " , className)
        const elements = Array.from(document.querySelectorAll(`.${className}`))
        elements.forEach(element => {

            let sup = document.createElement("sup");

            let img = document.createElement("img");
            img.style.height = "2%"
            img.style.width = "2%"
            img.style.cursor = "pointer"
            img.src = "https://upload.wikimedia.org/wikipedia/commons/4/43/Minimalist_info_Icon.png"
            // img.src = "./info.png"
            img.alt = "altText"

            let span = document.createElement("span")
            // span.style.all = "unset"
            span.style.display = "none"
            span.style.position = "absolute"
            span.style.backgroundColor = "antiquewhite"
            span.style.border = "1px solid black"
            span.style.borderRadius = "12px"
            span.style.padding = "2px 6px"
            // span.style.width = "12rem"
            span.style.textAlign = "justify"
            span.style.fontWeight = "lighter"
            span.style.color = "black"
            span.style.zIndex = "1000000000"; // This ensures it appears above other elements
            span.style.fontSize = "14px"
            span.style.textDecoration = "none"
            span.style.fontStyle = "normal"
            // span.style.height = "fit-content"
            span.innerHTML = `This is ${targetWord}`

            // span.style.display = "none";
            // span.style.position = "absolute";
            // span.style.backgroundColor = "antiquewhite !important";
            // span.style.border = "1px solid black !important";
            // span.style.borderRadius = "12px !important";
            // span.style.padding = "2px 6px !important";
            // span.style.width = "12rem !important";
            // span.style.textAlign = "justify !important";
            // span.innerHTML = `This is ${targetWord}`;




            if (targetWord.toLowerCase() === "crazy") {
                span.innerHTML = `It can perpetuate stereotypes about mental health and may be hurtful to those with mental health conditions.`
            }
            else if (targetWord.toLowerCase() === "mad") {
                span.innerHTML = `Using "mad" to describe someone negatively can be insensitive.`
            }
            else if (targetWord.toLowerCase() === 'stupid') {
                span.innerHTML = `Describing actions or decisions as "stupid" can be demeaning and hurtful.`
            }
            else {
                span.innerHTML = `This word is considered offensive.`
            }


            sup.appendChild(img)
            sup.appendChild(span)

            element.append(sup)
            let sups = element.children[0]
            let spans = element.children[0].children[1]
            const svgs = element.children[0].children[0];
            svgs.addEventListener('mouseover', function () {
                sups.children[1].style.display = "inline-block"
                // sups.children[1].style.display = "block"
            });

            svgs.addEventListener('mouseout', function () {
                sups.children[1].style.display = "none"
            });
        })
    })
}



// let targetWords = ["stupid", "crazy", "Crazy", "mad" ,  "Mad" , "MAD"]
let targetWords = slurList.split("|");
targetWords = targetWords.filter((x) => x.split(" ").length == 1) ; 
// let removeHash = targetWords.filter((x) => x.includes("#")===false);

console.log(targetWords)
// console.log(oneWordTargetWords)
// console.log(targetWords) ; 
let uliStore = []
getAllTextNodes(document.body, uliStore)
abc = locateSlur(uliStore, targetWords)
// console.log("uliStore", abc)
addMetaData(targetWords)

